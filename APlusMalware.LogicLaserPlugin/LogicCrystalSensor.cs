using System;

namespace APlusMalware.LogicLaserPlugin
{
    public class LogicCrystalSensor : LogicSensor
    {public LogicCrystalSensor(Segment segment, Int64 x, Int64 y, Int64 z, UInt16 cubeType, Byte flags, UInt16 value)
            : base(segment, x, y, z, cubeType, flags, value)
        {
        }

        protected override Byte CalculateOutput(SegmentEntity entity, UInt16 data)
        {
            CrystalEntity crystalEntity = entity as CrystalEntity;
            Int32 period = 1;
            if (crystalEntity != null)
            {
                switch (data)
                {
                    case 0: // Diamond
                        period = 2; // 5/2 hertz
                        break;
                    case 1:
                        period = 3;  // 5/3 hertz
                        break;
                    case 2:
                        period = 5;  // 5/5 hertz
                        break;
                    case 3:
                        period = 7;  // 5/7 hertz
                        break;
                    case 4:
                        period = 11;  // 5/11 hertz
                        break;
                    case 5: // Sugalite
                        period = 13;  // 5/13 hertz
                        break;
                }
            }
            return LowFrequencyThread.mnThreadedUpdates % period != 0 ? (Byte) 0 : (Byte) 255;
        }
    }
}

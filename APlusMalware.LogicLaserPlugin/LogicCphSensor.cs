using System;

namespace APlusMalware.LogicLaserPlugin
{
    public class LogicCphSensor : LogicSensor
    {
        public LogicCphSensor(Segment segment, Int64 x, Int64 y, Int64 z, UInt16 cubeType, Byte flags, UInt16 value)
            : base(segment, x, y, z, cubeType, flags, value)
        {
        }

        protected override Byte CalculateOutput(SegmentEntity entity, UInt16 data)
        {
            const Single maxCphHealth = 100;
            CentralPowerHub cph = entity as CentralPowerHub;
            if (cph == null)
                return 0;
            Single health = CentralPowerHub.Health;
            return (Byte)(health / maxCphHealth * 255);
        }
    }
}
